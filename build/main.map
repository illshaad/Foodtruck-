{"version":3,"sources":["webpack:///webpack/bootstrap a96108470cd959d8d4d6","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///./src/models/review.js","webpack:///./src/models/prods.js","webpack:///./src/index.js","webpack:///external \"dotenv/config\"","webpack:///external \"volleyball\"","webpack:///external \"pug\"","webpack:///external \"path\"","webpack:///./src/routes/route.js"],"names":["Schema","mongoose","ReviewSchema","title","String","text","food","type","Types","ObjectId","ref","Review","model","FoodSchema","description","price","Number","review","Food","PORT","DB_url","process","env","app","express","connect","db","connection","on","console","error","bind","once","log","set","path","join","__dirname","use","json","urlencoded","extended","listen","foodRouter","Router","post","req","res","newFood","body","save","err","saveFood","send","savefood","get","render","find","foods","_id","params","id","findById","delete","remove","result","newReview","push","message","put","Object","assign"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a96108470cd959d8d4d6","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","import mongoose from 'mongoose'\nimport Food from './prods'\n\nconst Schema = mongoose.Schema\n\n    const ReviewSchema = new Schema ({\n        title : String,\n        text : String,\n        food : {type: Schema.Types.ObjectId, ref:'food'}\n    })\n\n    const Review = mongoose.model('Review', ReviewSchema)\n\n    export { Review }\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/review.js","import mongoose from 'mongoose'\nimport { Review } from './review';\nconst Schema = mongoose.Schema;\n\nconst FoodSchema  = new Schema({\n    title : String,\n    description : String,\n    price : Number,\n    review : [{type:Schema.Types.ObjectId, ref:'Review'}]\n})\n\n\nconst Food = mongoose.model('Food', FoodSchema)\n\nexport { Food }\n\n\n// WEBPACK FOOTER //\n// ./src/models/prods.js","import express from 'express'\nimport 'dotenv/config';\nimport mongoose from 'mongoose';\nimport volleyball from 'volleyball'\nconst {PORT,DB_url} = process.env;\nimport pug from 'pug'\nimport path from 'path' \nconst app = express()\nmongoose.connect(DB_url);\nvar db = mongoose.connection;\ndb.on('error', console.error.bind(console, 'connection error:'));\ndb.once('open', function() {\nconsole.log('Ã§a marche ici') // c'est pour tester la connection de mangodb avec un message d'erreur //\n});\n\n//PUG//\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'pug');\n\nimport {foodRouter} from './routes/route'\n\n\napp.use(express.json())\napp.use(express.urlencoded({extended : false}))\napp.use(volleyball);\napp.use(\"/foodtruck\", foodRouter)\n\napp.listen(PORT,() =>{\n    console.log(`test!:${PORT}`)\n})\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"dotenv/config\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv/config\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"volleyball\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"volleyball\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"pug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pug\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 9\n// module chunks = 0","import express from 'express'\nimport mongoose from 'mongoose'\nimport {Review} from '../models/review'\nimport { Food } from '../models/prods'\nconst foodRouter = express.Router()\n\nfoodRouter.post('/add',(req,res)=>{\n    const newFood = new Food(req.body)\n    newFood.save((err,saveFood)=>{\n        if(err) res.send(err)\n        res.json(savefood)\n    })\n})\n\nfoodRouter.get('/add', (req,res)=>{\n    res.render('foodtruck')\n})\nfoodRouter.get('/',(req,res) => {\n    Food.find({},(err, foods) => {\n        if(err) res.send(err)\n        res.render('index')\n    })\n})\n\nfoodRouter.get('/:id',(req,res) => {\n    let _id = req.params.id;\n    Food.findById({_id}, (err, food)=>{\n        if(err) res.send(err)\n        res.json(food)\n    })\n})\nfoodRouter.delete('/:id',(req,res)=>{\n    let _id = req.params.id;\n    Food.remove({_id}, (err, result)=>{\n        if(err) res.send('err')\n            res.send('degage')\n    })\n})\n\n//\n\nfoodRouter.post('/review/add/:id',(req,res)=>{\n    Food.findById(req.params.id, (err,food) =>{\n        if(err) res.send(err)\n\n        const newReview = new Review(req.body)\n        newReview.save((err, review)=>{\n            if(err) res.send(err)\n            food.review.push(newReview)\n            food.save((err,review)=>{\n                if(err) res.send(err)\n                res.json({message:'ajout add'})\n            })\n        })\n    })\n})\n   \nfoodRouter.put('/:id', (req, res) => {\n    Food.findById({_id:req.params.id}, (err, food) => {\n        if(err) res.send(err)\n        Object.assign(food, req.body).save((err,food) => {\n            if(err) res.send(err)\n            res.json({food});\n        })\n    })\n})\n\nexport { foodRouter }\n\n\n// WEBPACK FOOTER //\n// ./src/routes/route.js"],"sourceRoot":""}